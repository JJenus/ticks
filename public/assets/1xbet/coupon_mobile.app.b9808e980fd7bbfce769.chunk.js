(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1144],{2065:function(t,e,o){"use strict";var i=o(3),n=o.n(i),s=o(9),a=o.n(s),u=o(0),r=o.n(u),c=o(2815),l=o(28),d=o(37),p={components:{CouponHeader:o(2510).default},extends:c.default,computed:{$_is_close_modal:function(){return this.$store.getters["coupon/"+l.eb]}},watch:{$_is_close_modal:function(t){t&&(this.$emit("close"),this.$store.dispatch("coupon/"+d.N))}},methods:{successCouponHandler:function(){this.$store.dispatch("coupon/"+d.N)}}},h=o(24),b=Object(h.a)(p,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coupon"},[o("coupon-header"),t._v(" "),o("div",{staticClass:"c-tabs__content"},[o("transition",{attrs:{name:t.animation,mode:"out-in"}},[0===t.$_tab?o("coupon-tab"):t._e(),t._v(" "),1===t.$_tab?o("opened-bets"):t._e(),t._v(" "),2===t.$_tab?o("editor"):t._e()],1)],1)],1)}),[],!1,null,null,null).exports,_=o(221),f=o(47),v=o(19);function m(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function C(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}e.a={data:function(){return{is_freeze_modal:!1,is_freeze_line_coupon:!1}},computed:C(C({},Object(f.mapGetters)(_.b,{isFastCouponShowing:l.ab})),{},{liveXhrTimer:function(){return this.$store.state.dashboard_live&&this.$store.state.dashboard_live.xhr_timer}}),methods:C(C({},Object(f.mapMutations)(_.b,{setFastCouponPosition:v.Z})),{},{openModal:function(){var t=this;return a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:if(!t.is_freeze_modal){e.next=4;break}return e.abrupt("return");case 4:if(!t.liveXhrTimer){e.next=7;break}return e.next=7,t.$store.dispatch("dashboard_live/dashboardStopUpdate","coupon modal");case 7:t.addLockedClass(),t.is_freeze_modal=!0,t.setFastCouponPosition(!1),t.is_freeze_line_coupon=!0,t.$modal.show(b,{},{clickToClose:!0,name:"coupon-modal",classes:"m-coupon__modal",height:"auto"},{opened:function(){t.setModalHeight(),window.addEventListener("resize",t.setModalHeight)},"before-close":function(){t.is_freeze_line_coupon=!1,t.is_freeze_modal=!1,!t.liveXhrTimer&&t.$store.state.dashboard_live&&t.$store.dispatch("dashboard_live/dashboardUpdate1x2"),t.removeLockedClass(),window.removeEventListener("resize",t.setModalHeight)}});case 12:case"end":return e.stop()}}),e)})))()},setModalHeight:function(){var t=document.querySelector(".v--modal-overlay");t&&(t.style.height=window.innerHeight+"px")},addLockedClass:function(){window.document.body.style.top="-".concat(window.scrollY,"px"),window.document.body.classList.add("menu-active")},removeLockedClass:function(){var t=window.document.body.style.top;window.document.body.classList.remove("menu-active"),window.document.body.style.top="",window.scrollTo(0,-1*parseInt(t||"0",10))}})}},3726:function(t,e,o){"use strict";o.r(e);var i=o(221),n=o(30),s=o.n(n),a=o(0),u=o.n(a),r=o(14),c=o.n(r),l=o(262),d=o.n(l),p=o(577),h=o.n(p),b=o(47),_=o(34),f=o(2065),v=o(28),m=o(218),C=o.n(m),w=o(400),y=o(37),g=o(19),O=o(917),$=o(1813),S=o(1555),P=o(1566),E=o(838),M=o(1791),A=o(1998),B=o(414);function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function L(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(Object(o),!0).forEach((function(e){u()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}c.a.use(d.a);var F=Object(b.createNamespacedHelpers)("coupon"),j=F.mapActions,T=F.mapMutations,R=o(1805).default,V={components:{Icon:function(){return o.e(1109).then(o.bind(null,3990))},LineCoupon:function(){return o.e(1110).then(o.bind(null,3669))},BetSumsKeyboard:function(){return o.e(1141).then(o.bind(null,3680))}},mixins:[f.a,S.a,P.a,E.a,M.a],props:{isDownCouponSettingEnabled:{type:Boolean,default:!1},isRightMenuVisible:{type:Boolean,default:!1},isLeftMenuVisible:{type:Boolean,default:!1},isShowMobileAppHeader:{type:Boolean,default:!0},isShowIdentificationHeader:{type:Boolean,default:!0},isMobileAppDownloadPopupVisible:{type:Boolean,default:!1}},data:function(){return{isIgnoreOpenCouponModal:!0,isOneClickPutBetRequestActive:!1,localSobIds:[],isKeepOpenFastCoupon:!0,lastRoutePath:null,currentPath:null,animation:"fade-in-left",bet_count:0,is_registration_block_hidden:!1,is_modal_opened:!1,previousIsFastCouponValue:!1}},computed:L(L(L({},Object(b.mapGetters)(i.b,{couponSobIdsList:v.Ab,isPutBetRequestActive:v.xb,isOneClickSettingEnabled:v.tb,isFastCouponSettingEnabled:v.E,isFocusedInput:v.bb,$_is_need_save_coupon:v.fb,$_bets:v.c,$_tab:v.a,$_success_coupon:v.nb,$_betconstructor_groups:v.e,$_coupon_bet_type:v.t,$_is_game_builder:v.cb,$_is_roulette_visible:v.jb,$_section:v.C})),Object(b.mapGetters)(A.b,{virtualKeyboardIsShow:"getIsShow"})),{},{isAllowOpenCouponModal:function(){return(this.isBetEditorCouponActiveTab||this.isDownCouponSettingEnabled&&!this.isOneClickPutBetRequestActive)&&this.isAllowOnCurrentRoute&&!this.$_is_input_focused&&!this.virtualKeyboardIsShow},isFastCoupon:function(){return this.isFastCouponSettingEnabled&&this.isFastCouponShowing&&this.isAllowOnCurrentRoute&&!this.isBetEditorCouponActiveTab&&!this.isOneClickPutBetRequestActive&&!this.isRightMenuVisible&&!this.isLeftMenuVisible},isBetEditorCouponActiveTab:function(){return this.$_tab===_.h.tabs.BET_EDITOR},isAllowOnCurrentRoute:function(){var t,e;return _.h.availableRouteMetaGroups.includes(null===(t=this.$route)||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.route_group)},isAllowToShowFastCoupon:function(){return Boolean(!this.is_freeze_line_coupon&&this.isFastCouponSettingEnabled&&!this.isPutBetRequestActive)},$_is_ordinars_modal:function(){return this.$_coupon_bet_type===_.h.COUPON_TYPES.ORDINARS},$_is_input_focused:function(){return this.isFocusedInput&&!this.isRightMenuVisible&&!this.isLeftMenuVisible},isQatarPage:function(){return[B.a.GAME,B.a.HOME].includes(this.$route.name)}}),watch:{isPutBetRequestActive:function(t){this.isOneClickPutBetRequestActive=t&&this.isOneClickSettingEnabled},couponSobIdsList:function(t,e){var o=Boolean(t&&t.length);this.isAllowToShowFastCoupon&&this.updateFastCouponVisibility({isCouponNotEmpty:o,isFirstAdded:Boolean(t.length&&!e.length)}),this.isIgnoreOpenCouponModal||this.updateModalCouponVisibility({isCouponNotEmpty:o,isCouponDirty:!h()(s()(t).sort(),s()(e).sort())})},isFastCouponSettingEnabled:{immediate:!0,handler:function(t){this.updateFastCouponVisibility({isCouponNotEmpty:t&&this.couponSobIdsList.length>0})}},$_section:{handler:function(t,e){"betconstructor"===e&&this.setGroups({groups:[]}),"betconstructor"!==t&&"finance"!==t||this.clearBets()},immediate:!0},$_success_coupon:function(t){this.successCouponHandler(t)},$_tab:function(t,e){this.animation=t>e?"fade-in-left":"fade-in-right"},$_is_need_save_coupon:function(t){!0===t&&(this.$setItem("coupon",JSON.stringify(this.$_bets)),this.setNeedSaveCoupon({flag:!1}))},$_bets:function(t){if(t&&t.length!==this.bet_count&&(this.bet_count=t.length,this.$_betconstructor_groups.length&&!this.bet_count&&this.setGroups({groups:[]})),!this.is_registration_block_hidden&&t&&t.length){var e=document.getElementById("coupon_reg");e&&(e.style.display="none")}}},beforeCreate:function(){var t=this;void 0===this.$store.state[i.b]&&this.$store.registerModule(i.b,i.d),window.action_coupon_logo_allow=function(e){t.$store.dispatch("coupon/ACTION_SET_LOGO_ALLOWED",{value:e})},C.a.rootInstance=this.$root,w.a(),w.b(),window.Ajax=[],window.Timers=[],window.rData=[],window.rGroups=[]},beforeMount:function(){var t=this;this.$_is_ticket_window&&setInterval((function(){var t=window.document.createEvent("Event");t.initEvent("emit_keyboard",!1,!1),window.dispatchEvent(t)}),1e3),this.$dictionary.add(window.COUPON_DICTIONARY),this.$dictionary.add(window.CASHOUT_DICTIONARY),window.add_bet_to_new_coupon=this.addBetToNewCoupon,this.loadCoupon().finally((function(){t.isIgnoreOpenCouponModal=!1})),this.lastRoutePath=this.$route.path},mounted:function(){window.addEventListener("bet_sums_keyboard_rendered",this.setPositionUpToKeyboard),window.addEventListener("bet_sums_keyboard_destroyed",this.setPositionWithoutKeyboard)},beforeDestroy:function(){window.removeEventListener("bet_sums_keyboard_rendered",this.setPositionUpToKeyboard),window.removeEventListener("bet_sums_keyboard_destroyed",this.setPositionWithoutKeyboard)},methods:L(L(L({},j({setNeedSaveCoupon:y.O,setCoupon:y.z,setGroups:y.H,clearBets:y.f,clearIntervalBetsCost:y.W,loadCouponsCost:y.gb})),T({setCouponType:g.T})),{},{loadCoupon:function(){var t=this;return this.$getItem("coupon").then((function(e){var o,i=t.$_section;if("betconstructor"!==i&&"finance"!==i&&"matchofdays"!==i){if(null===(o=e=JSON.parse(e))||void 0===o?void 0:o.some((function(t){return t.is_builder}))){var n=t.$store.state.GLOBAL.CONST_BUILDER;return void 0===t.$store.state[n]&&t.$store.registerModule(n,O.a),void t.$store.dispatch(n+"/setCoupon",e)}t.setCoupon({bets:e||[]})}})).catch((function(t){console.error(t)}))},closeLine:function(){this.setFastCouponPosition(!1)},syncLastRoutePath:function(){this.lastRoutePath=this.$route.path},updateModalCouponVisibility:function(t){var e=t.isCouponNotEmpty,o=void 0!==e&&e,i=t.isCouponDirty,n=void 0!==i&&i;this.isFastCouponSettingEnabled||this.isDownCouponSettingEnabled||o&&n&&this.openModal()},updateFastCouponVisibility:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isCouponNotEmpty,o=void 0!==e&&e,i=t.isFirstAdded,n=void 0!==i&&i;return this.previousIsFastCouponValue=this.isFastCoupon,n?(this.syncLastRoutePath(),this.isKeepOpenFastCoupon=!0,void this.setFastCouponPosition(!0)):this.$route.path!==this.lastRoutePath?(this.syncLastRoutePath(),void this.setFastCouponPosition(o&&this.isKeepOpenFastCoupon)):(this.isKeepOpenFastCoupon=o,void this.setFastCouponPosition(this.isKeepOpenFastCoupon))},setPositionUpToKeyboard:function(t){var e;(null==t||null===(e=t.detail)||void 0===e?void 0:e.height)&&(this.previousStyleBottom=this.$el.style.bottom,this.$el.style.bottom=t.detail.height)},setPositionWithoutKeyboard:function(){this.$el.style.bottom=this.previousStyleBottom,this.previousStyleBottom=null},successCouponHandler:function(t){var e=this;if(null!==t&&Object.keys(t).length&&!this.is_modal_opened){var o,i,n=this.$_is_ordinars_modal?$.a:R;this.is_modal_opened=!0,this.$modal.show(n,{coupon:t},{classes:"c-coupon-modal-box",name:"coupon_modal",width:"100%",clickToClose:!1},{"before-close":function(){e.is_modal_opened=!1,e.setCouponType({type:_.h.COUPON_TYPES.SINGLE})}});var s,a,u,r,c,l,d,p,h=!Array.isArray(t)&&t.Coupon.promo?t.Coupon.promo:"",b=((null===(o=this.$route)||void 0===o?void 0:o.params)||{}).section;if(null==t?void 0:t.Coupon)b=1===(null===(s=t.Coupon)||void 0===s||null===(a=s.Events)||void 0===a?void 0:a.length)?null===(u=t.Coupon.Events[0])||void 0===u?void 0:u.sport_name:"несколько спортов";if((null==t||null===(i=t.Coupon)||void 0===i?void 0:i.Vid)&&this.$analytics.couponV2.submitSuccessPlaceBetType(t.Coupon.Vid),this.$analytics.couponV2.submitSuccessPlaceBetCoupon(h,b),this.previousIsFastCouponValue)this.$analytics.eventModelCoupon.successFastCouponBet(b,null===(r=t.Coupon)||void 0===r?void 0:r.Summ);else this.$analytics.eventModelCoupon.successMainCouponBet(null===(c=t.Coupon)||void 0===c||null===(l=c.Events)||void 0===l?void 0:l.length,null===(d=t.Coupon)||void 0===d?void 0:d.Coef,null===(p=t.Coupon)||void 0===p?void 0:p.Summ,h)}}})},k=o(24),D={components:{App:Object(k.a)(V,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"min-coupon",class:{qatar:t.isQatarPage}},[t.isAllowOpenCouponModal?o("icon",{directives:[{name:"show",rawName:"v-show",value:!t.isFastCouponShowing||t.isBetEditorCouponActiveTab,expression:"!isFastCouponShowing || isBetEditorCouponActiveTab"}],attrs:{isShowMobileAppHeader:t.isShowMobileAppHeader,isShowIdentificationHeader:t.isShowIdentificationHeader,isMobileAppDownloadPopupVisible:t.isMobileAppDownloadPopupVisible},on:{openModal:function(e){return t.openModal()}}}):t._e(),t._v(" "),t.isFastCoupon?o("LineCoupon",{on:{closeLine:function(e){return t.closeLine()},openModal:function(e){return t.openModal()}}}):t._e(),t._v(" "),t.isOneClickPutBetRequestActive?o("div",{staticClass:"coupon-widget coupon-widget_fixed"},[o("div",{staticClass:"coupon-widget__ico"}),t._v(" "),o("preloader",{attrs:{local_show:""}})],1):t._e(),t._v(" "),o("transition",{attrs:{name:"appear-in-bottom"}},[t.$_is_input_focused?o("BetSumsKeyboard",{attrs:{isRightMenuVisible:t.isRightMenuVisible,isLeftMenuVisible:t.isLeftMenuVisible}}):t._e()],1)],1)}),[],!1,null,null,null).exports},mixins:[o(915).a],created:function(){this.$store.state[i.b]||this.$store.registerModule(i.b,i.d)}},N=Object(k.a)(D,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("App",{attrs:{isDownCouponSettingEnabled:t.isDownCouponSettingEnabled,isLeftMenuVisible:t.isLeftMenuVisible,isRightMenuVisible:t.isRightMenuVisible,isShowMobileAppHeader:t.isShowMobileAppHeader,isShowIdentificationHeader:t.isShowIdentificationHeader,isMobileAppDownloadPopupVisible:t.isMobileAppDownloadPopupVisible}})}),[],!1,null,null,null);e.default=N.exports},817:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));var i=function(t){var e=t.gameNumber,o=t.sportName,i=t.championshipName,n=t.isSingleOpponent,s=t.gameVid,a=t.additionalInfo,u=e?"".concat(e,". "):"",r="".concat(u).concat(o," ").concat(i);return n&&(r="".concat(r,". ").concat(a)),s&&(r="".concat(r," (").concat(s,")")),r}}}]);